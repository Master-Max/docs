************************
CS-Cart 4.15.2 Changelog
************************

=============================
New Features and Improvements
=============================

[+] Add-ons: GDPR Compliance (EU): A link to the Cookie consent texts editing page was added to the add-on settings.

[+] Add-ons: Product Bundles: The ability to select the location of the block with product bundle was added.

[+] Add-ons: RMA: Import: The ability to import the product return parameters was added.

[+] Add-ons: RMA: The ability to set the default add-on settings was added.

[+] Core: The mcrypt polyfill package was added for some payments that use mcrypt.

[+] Design: Menus: Quick links: Highlighting of active menu item was added.

[+] Multi-Vendor: Add-ons: Vendor data premoderation: Email notification about new products on moderation was added.

[+] Multi-Vendor: Add-ons: Vendor locations [Beta]: Yandex.Maps support was added.

[+] Products: Performance: Lazy load of feature variants on the bulk product editing page was added.

[+] Products: The restriction on entering letters in the product quantity field was added.

[+] Search: If the form has the "cm-disable-empty-all" meta class, then empty fields will not be sent to the server.

=====================
Functionality Changes
=====================

[*] Add-ons: Product reviews: Message Center: Comments and reviews: Design: The "h3" tag in the user login modal was replaced with a "div" tag.

[*] Design: Fonts: The display of system fonts on Ubuntu was improved.

[*] Design: The storefront status change is now recalculated automatically.

[*] Export/Import: The color of the notification of successful import without missing items was changed.

[*] Multi-Vendor: Add-ons: Advanced products import: CRON command display was added to the admin panel for presets created by vendors.

[*] Multi-Vendor: Add-ons: Stripe Connect payments: Connect onboarding has been added to the vendors connection system.

[*] Multi-Vendor Plus: Add-ons: Common Products for Vendors: "Add to comparison list" button was added to common products.

[*] Order management: Profile and payment fields are no longer required on the order editing page in the admin panel.

[*] Shippings: Temando: Temando shipping services were removed.

=========
Bug Fixes
=========

[!] API: Products: GET request to the products entity could return more decimal places in the price value than it was specified in the currency settings. Fixed.

[!] Add-ons: Advanced products import: Images were not imported from the default image directory. Fixed.

[!] Add-ons: Blog: Opening non-existent pages in pagination displayed the contents of the last available page. Fixed.

[!] Add-ons: Catalog mode: Product bundles: In the catalog store operation mode, the "Add all to cart" button was displayed in product bundles. Fixed.

[!] Add-ons: Comments and Reviews: Notifications: Item about new product reviews was displayed in the notification section of the add-on when the "Product reviews" add-on was enabled. Fixed.

[!] Add-ons: Data feeds: Adding new fields replaced existing ones. Fixed.

[!] Add-ons: Google Analytics: GDPR Compliance (EU): The statistics of visits were not tracked when the GDPR add-on was enabled. Fixed.

[!] Add-ons: Google Sitemap: The link to the sitemap was missing in the settings of the add-on in case the store has only one storefront. Fixed.

[!] Add-ons: Import from shopify: Extra product images were imported incorreclty. Fixed.

[!] Add-ons: Landing pages from Tilda: Extra text was displayed at the end of Tilda page content. Fixed.

[!] Add-ons: Landing pages from Tilda: Website page content was displayed on other pages. Fixed.

[!] Add-ons: Maps and geolocation: On the order detail page, the view toggle was overlaying the search. Fixed.

[!] Add-ons: Maps and geolocation: Customer location could prevent from placing order if the country was disabled in admin panel. Fixed.

[!] Add-ons: Maps and geolocation: Incorrect text could dispalyed in the block with buyer's location. Fixed.

[!] Add-ons: Maps and geolocation: Preliminary shipping calculation could cause a notification on the storefront about the required minimum quantity of products to buy. Fixed.

[!] Add-ons: Maps and geolocation: Shipping estimation block could rewrite product page title. Fixed.

[!] Add-ons: Maps and geolocation: Shipping estimation was working incorrectly with cart promotions on product page. Fixed.

[!] Add-ons: Message center: Threads with deleted products caused PHP notices. Fixed.

[!] Add-ons: Product Variations: The order of products in the cart could change when a different variation was selected in the cart. Fixed.

[!] Add-ons: Product Variations: When the purpose of the feature was changed, the sequence of features in the group did not change. Fixed.

[!] Add-ons: Product bundles: It was possible to choose features for variations from bundle created as separate products. Fixed.

[!] Add-ons: Product bundles: Multiple items of same product with any options combinations available were not split by one on the storefront. Fixed.

[!] Add-ons: Product bundles: Name of variation, which was added to bundle during creation, could be confusing. Fixed.

[!] Add-ons: Product bundles: Product Variations: Discount could be calculated incorrectly for some product combinations in the bundle. Fixed.

[!] Add-ons: Product bundles: Taxed price for bundle and products in it was not shown on the storefront even if settings required that. Fixed.

[!] Add-ons: Product reviews: Exim: Line breaks in product reviews disappeared. Fixed.

[!] Add-ons: Product reviews: GDPR Compliance (EU): The language variable was missing on customer details page. Fixed.

[!] Add-ons: Product variations: Product bundles: Product with zero amount could not be purchased even if the "Allow negative amount in the inventory" setting was turned on. Fixed.

[!] Add-ons: Product variations: Product features with the "Images" feature style did not work correctly when the "Allow negative amount in inventory" setting was enabled. Fixed.

[!] Add-ons: RMA: Gift certificates: A gift certificate was created incorrectly in stores with one storefront. Fixed.

[!] Add-ons: RMA: Languages: The title of the search field and the return button used the same language variable. Fixed.

[!] Add-ons: RMA: Reward Points: Order total was calculated incorrectly after the refund of the order partially paid with reward points. Fixed.

[!] Add-ons: Reward points: In some cases, switching from the admin panel to the storefront caused an error. Fixed.

[!] Add-ons: SEO: Redirection from the old SEO name was performed with the non-permanent status. Fixed.

[!] Add-ons: SEO: Redirects from URL containing uppercase letters were not performed. Fixed.

[!] Add-ons: SEO: There was no redirect from different product URLs when the "Use single URL for all languages" was active in the add-on settings. Fixed.

[!] Add-ons: Social buttons: GDPR: Social buttons were not displayed on product page with the "Cookie consent" setting turned off. Fixed.

[!] Add-ons: Social login: Log in from the product page was redirecting user to the home page. Fixed.

[!] Add-ons: Stores and pickup points: Store could not have more than 88 rate areas. Fixed.

[!] Add-ons: Wishlist: An error appeared when clearing the wish list. Fixed.

[!] Admin panel: Design: In some cases, the link to the storefront located at the admin toolbar led to another storefront. Fixed.

[!] Cart: A product was not removed from the cart if its quantity was zero. Fixed.

[!] Context menu: The table was shifting when the context menu was displayed. Fixed.

[!] Core: Add-ons: Manual installation of the add-ons could be performed incorrectly. Fixed.

[!] Core: JS: CORS error could break correct work of admin panel when using iframe. Fixed.

[!] Core: Sessions: Sessions could be stored longer than the configured time. Fixed.

[!] Design: Administration panel: Admin menu items were not selectable on low height screens. Fixed.

[!] Design: Filters: Large prices in the filter block was overflowed. Fixed.

[!] Design: Layouts: Blocks: An error occurred while editing content in the shipping methods block. Fixed.

[!] Design: Layouts: With multiple layouts, the cancel button in the properties popup did not work. Fixed.

[!] Design: Menu: Drop-down menu items could be displayed outside the page. Fixed.

[!] Design: Popups: If you close the popup while executing the AJAX-request, then an error could occur. Fixed.

[!] Exim: Product features: Features with the "Date selection" filter type was exported with an empty value. Fixed.

[!] Export/Import: Feature variants could be imported incorrectly. Fixed.

[!] Marketing: Promotions: When creating a new promotion with product feature in the condition, the selected feature variants disappeared after saving. Fixed.

[!] Mobile App: Block with products scrolled for the last product in the block. Fixed.

[!] Mobile App: Stores and pickup points: Pickup points were not displayed. Fixed.

[!] Mobile App: The Track Inventory setting didn't work in the app. Fixed.

[!] Mobile app: Address changes were not taken into account when calculating shipping costs. Fixed.

[!] Mobile app: Login through Google redirected to the mobile version of the site. Fixed.

[!] Mobile app: Orders: An error appeared when going to the orders page in the admin panel. Fixed.

[!] Mobile application: Loaded product images were displayed in different size. Fixed.

[!] Mobile application: Multiline inputs didn't work correctly. Fixed.

[!] Multi-Vendor: API: Vendors: An error occurred while creating vendors. Fixed.

[!] Multi-Vendor: Add-ons: PayPal Commerce Platform: On the credit card payment form, the "Ship To Billing Address" checkbox was displayed. Fixed.

[!] Multi-Vendor: Add-ons: PayPal Commerce Platform: Stripe Connect payments: A PHP error occurred on the order details page in PHP 8.0. Fixed.

[!] Multi-Vendor: Add-ons: Stripe Connect payments: If the number of decimal places in the currency settings was not two, incorrect amount was sent to Stripe. Fixed.

[!] Multi-Vendor: Add-ons: Vendor locations [Beta]: Vendors were displayed incorrectly on the map when switching pages. Fixed.

[!] Multi-Vendor: Add-ons: Vendor locations: Google Maps display settings did not work. Fixed.

[!] Multi-Vendor: Add-ons: Vendor-to-admin payments: "Marketplace fees" product could be modified by administrator when add-on was turned off. Fixed.

[!] Multi-Vendor: Add-ons: Vendor-to-admin payments: Marketplace fees could be taxed even if taxes for it were turned off at addon's settings. Fixed.

[!] Multi-Vendor: Add-ons: Vendor panel configurator: There were Currency and Language extra elements in the menu. Fixed.

[!] Multi-Vendor: Admin panel: Dashboard: Income value for selected period of 1 day could be incorrect. Fixed.

[!] Multi-Vendor: Export/Import: Vendors: Products: Default shipping methods were not taken into account when creating vendor by import. Fixed.

[!] Multi-Vendor: Order management: An error was displayed when creating an order with products from different vendors. Fixed.

[!] Multi-Vendor: Vendors profile fields: When updating the vendor, the data in custom profile fields could by overwritten. Fixed.

[!] Multi-Vendor Plus: Add-ons: Common Products for Vendors: Call requests: Buy now with 1-click button for the vendor's product product offer didn't work. Fixed.

[!] Multi-Vendor Plus: Add-ons: Common Products for Vendors: Adding a product offer to cart did not refresh cart data after option change. Fixed.

[!] Multi-Vendor Plus: Add-ons: Common Products for Vendors: Design: The list price was displayed incorrectly. Fixed.

[!] Multi-Vendor Plus: Add-ons: Common Products for Vendors: Filters: Filter by vendor products worked incorrectly with pagination. Fixed.

[!] Multi-Vendor Plus: Add-ons: Common Products for Vendors: Layouts: Changes in a layout of a common product did not apply to product offers. Fixed.

[!] Multi-Vendor Plus: Add-ons: Common Products for Vendors: Out of stock products were not added to the cart when the pre-order setting was active. Fixed.

[!] Multi-Vendor Plus: Add-ons: Common Products for Vendors: Product offers were available in the advanced products search. Fixed.

[!] Multi-Vendor Plus: Add-ons: Common Products for Vendors: Product options: Vendor offers were added to cart with incorrect option variants. Fixed.

[!] Multi-Vendor Plus: Add-ons: Common Products for Vendors: Shipping properties weren't saved for product offers. Fixed.

[!] Multi-Vendor Plus: Add-ons: Common Products for Vendors: The "Add to cart" button didn't work for common products in some cases. Fixed.

[!] Multi-Vendor Plus: Add-ons: Common Products for Vendors: Vendor locations: Filters: Common products were hidden in the filter by vendor location results. Fixed.

[!] Multi-Vendor Plus: Add-ons: Common Products for Vendors: Wish list: Product options: When choosing a product option the "Add to wish list" button was duplicated for product offers. Fixed.

[!] Multi-Vendor Plus: Add-ons: Direct Customer-to-Vendor Payments: Product with required option as file could not be added to the cart. Fixed.

[!] Multi-Vendor Ultimate: Add-ons: Common Products for Vendors: Storefronts were not taken into account when calculating common product quantity. Fixed.

[!] Multi-Vendor Ultimate: Add-ons: Common Products for Vendors: Product variations: Storefronts were not taken into account when calculating variation as common product quantity. Fixed.

[!] Multi-Vendor Ultimate: Add-ons: Order fulfillment by marketplace: Delivery became free if credit card was rejected. Fixed.

[!] Multi-Vendor Ultimate: Add-ons: Order fulfillment by marketplace: The choice of shipping was not displayed when creating an order from the admin panel. Fixed.

[!] Multi-Vendor Ultimate: Add-ons: Order fulfillment by marketplace: Vendor plans: A PHP Notice was happened when updating vendor plan if they had not assigned plan before. Fixed.

[!] Multi-Vendor Ultimate: Add-ons: Warehouses: Common Products for Vendors: When the "Allow negative amount in inventory" setting was enabled, it was possible to order a common product from any rate area regardless of its availability. Fixed.

[!] Notifications: Product files had incorrect download links in emails if store was using HTTPS protocol. Fixed.

[!] Orders: Abandoned / Live carts: A product search displayed only abandoned carts containing all the selected products. Fixed.

[!] Orders: Cart: Products in one of the cart and order related variables stored customer's password hash. Fixed

[!] Orders: Sales reports: A balloon with a long product name did not fit on the screen. Fixed.

[!] Payments: Stripe: When choosing another product variant on the storefront, the Google Play and Apple Pay buttons disappeared on the product page. Fixed.

[!] Product filters: When there were two identical blocks with filters on the page, only the first one was working. Fixed.

[!] Products: Features: An administrator couldn't add variants to an existing feature in a popup. Fixed.

[!] Products: Features: Feature fields were displayed incorrectly if a long feature value was selected on the product editing page. Fixed.

[!] Products: Quantity discounts: Percentage discounts could not be non-integral. Fixed.

[!] Products: Subscribers: Back in stock notification could have been sent by mistake. Fixed.

[!] Profile fields: A space could be used for required fields. Fixed.

[!] Promotions: The "Any option combinations" setting was not applied for the second condition "Products in the list". Fixed.

[!] RTL: Currencies: Negative prices were displayed incorrectly in emails. Fixed.

[!] Shippings: Australia post: Integration used deprecated tracking link. Fixed.

[!] States: There were missing states for Ireland and the United Kingdom. Fixed.

[!] Taxes: Orders: In some cases, when editing an order in the admin panel, the delivery tax was not calculated. Fixed.

[!] Theme editor: Google fonts might not apply to the non Latin characters. Fixed.

[!] UI/UX: When switching to other tabs, the context menu remained and worked incorrectly on the search results page. Fixed.

[!] UI/UX: Deleting images did not work correctly. Fixed.

[!] UI/UX: Product filters: Collapsed filters were expanded after page reload. Fixed.

[!] UI/UX: Product filters: When user selected a filter option at the end of the list, the scroll position was reset to the top of the list. Fixed.

[!] UI/UX: The main menu was broken to a new line on small screens. Fixed.

[!] Ultimate: Add-ons: Warehouses: Orders with products that got options couldn't be placed. Fixed.

[!] Ultimate: Sessions: Cart: Cart of the storefront could be emptied when working with multiple storefronts. Fixed.

[!] Ultimate: Storefronts: Currencies: Currency exchange rates were reset after creating new storefront. Fixed.

[!] Ultimate: Storefronts: Email notifications: Notifications about product's low stock could be sent from company's email of one storefront. Fixed.

[!] Ultimate: Storefronts: Usergroups: Privileges: A user from a group with full access to storefronts got a PHP error on the storefront list. Fixed.

[!] Ultimate: Categories: Shippings: Storefronts: After saving changes to the list of categories or shipping methods, all the categories or shipping methods no longer belonged to storefronts. Fixed.

[!] Ultimate: Add-ons: SEO: Storefronts: Saving product in "All storefronts" mode was reseting its SEO name. Fixed.
