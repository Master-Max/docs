******
4.13.3
******

==================================
Новая функциональность и улучшения
==================================

[+] Мобильное приложение: Если витрина закрыта, то теперь в приложении отображается сообщение о временном закрытии магазина.

[+] Модули: Карты и геолокация: На странице настроек модуля добавлено отображение карты для проверки корректности API ключа.

[+] Модули: Мобильное приложение: Теперь в настройках модуля можно выбрать готовую цветовую схему.

[+] Модули: Отзывы о товарах: Вариации товаров: Теперь вы можете сделать отзывы общими между вариациями, показанными на витрине как отдельные товары.

[+] Multi-Vendor: Модули: Премодерация данных продавцов: Продавцы: Добавлено оповещение администратора о новом продавце при автоматическом подтверждении аккаунтов.

[+] Multi-Vendor: Модули: Платежи через Stripe Connect: В описания платежей добавлено название маркетплейса и номер заказа.

=========================================
Изменения в существующей функциональности
=========================================

[*] Мобильное приложение: Добавлено два новых статуса товара: "Требует проверки" и "Отклонён".

[*] Модули: Мобильное приложение: Теперь настройки мобильного приложения разделены на 2 вкладки: настройки, которые применятся после пересборки приложения, и настройки, которые можно менять в процессе работы.

[*] Модули: Экспорт в Яндекс.Маркет: Элемент currencies был исключен из yml прайс-листа.

[*] Модули: SEO: Теперь, если SEO-имя введено в некорректном формате выводится соответствующее оповещение.

[*] Multi-Vendor: Витрины: Языки: Теперь нельзя выбрать язык витрины по умолчанию, если он не доступен для этой витрины.

[*] Multi-Vendor: Мастер настройки магазина: Переделан раздел "Продавцы".

[*] Multi-Vendor: Модули: Премодерация данных продавцов: Обновлён интерфейс настроек.

==================
Исправления ошибок
==================

[!] Администрирование: Журнал событий: В форме расширенного поиска отображался неверный тип записи. Исправлено.

[!] Администрирование: Хранилище данных: В настройках CDN отображалась некорректная ссылка на сайт AWS. Исправлено

[!] Витрины: Список стран не прокручивался в CS-Cart Ultimate. Исправлено.

[!] Витрины: Языки: В некоторых случаях язык витрины по умолчанию мог быть не доступен для неё. Исправлено.

[!] Витрины: Языки: При отключении языка на витрине, он мог быть недоступен и в панели администратора. Исправлено.

[!] Дизайн: Блоки: Не обновлялся список блоков при удаление блока через шестерёнку. Исправлено.

[!] Дизайн: Группы пользователей: При смене статуса группы пользователя отображалась некорректная опция "Информировать покупателя". Исправлено

[!] Дизайн: Оформление заказа: Номер телефона отображался некорректно в RTL языках. Исправлено.

[!] Категории: В некоторых случаях при удалении всех категорий не создавалась "категория-корзина". Исправлено.

[!] Корзина: Промо-акции и скидки: Авторизованный покупатель не мог выбрать другую опцию товара из промо-акции. Исправлено.

[!] Корзина: Цены на товары в блоке "Корзина" не учитывали примененные к товарам в корзине промо-акции. Исправлено.

[!] Макеты: Информация о создании нового макета, скопированного с основного макета, могла быть неправильно понята. Исправлено.

[!] Мобильное приложение: Для цифровых товаров отображалась надпись "Нет в наличии". Исправлено.

[!] Мобильное приложение: Карточки товаров некорректно отображались на некоторых устройствах. Исправлено.

[!] Мобильное приложение: Не работала прокрутка при просмотре страниц в WebView на некоторых устройствах. Исправлено.

[!] Мобильное приложение: Некоторые тексты отображались на английском без перевода. Исправлено

[!] Мобильное приложение: Приложение зависало при первом запуске. Исправлено.

[!] Модули: Вариации товаров: Переключение между опциями и вариациями не работало в быстром просмотре. Исправлено.

[!] Модули: Вариации товаров: При нажатии «Сохранить» на вкладке «Вариации», изменения товара не сохранялись. Исправлено.

[!] Модули: Вариации товаров: Характеристики: Для характеристики с целью "Вариации как один товар" не добавлялись новые категори, если у товаров уже была какая-либо категория, отличная от категории характеристики. Исправлено.

[!] Модули: Вариации товаров: API: Группу вариаций можно было создать на основе характеристик с неподходящими для этого целями. Исправлено.

[!] Модули: Вход через соцсети: На главной странице могла отображаться ошибка PHP Notice. Исправлено.

[!] Модули: Вход через соцсети: На странице регистрации неавторизованного пользователя отображались кнопки для привязки соцсетей к текущему профилю вместо кнопок авторизации через соцсети. Исправлено.

[!] Модули: Карта сайта для Yandex и Google: При отправке карты сайта в Google возникала ошибка. Исправлено.

[!] Модули: Карты и геолокация: Предварительный расчёт доставки не учитывал зависимость от тарифных зон. Исправлено.

[!] Модули: Карты и геолокация: Яндекс карты: При установке местоположения, город не записывался. Исправлено.

[!] Модули: Магазины и пункты самовывоза: На витрине в выпадающем списке отображалось только 10 городов. Исправлено

[!] Модули: Не работала кнопка отключения всех модулей. Исправлено.

[!] Модули: Обратный звонок: Кнопка «Купить в один клик» отображалась в списке товаров, если у товара были опции и его не было в наличии. Исправлено.

[!] Модули: Отзывы о товарах: При включенной настройке "Показывать содержимое вкладки во всплывающем окне" флажок "С фото" ломал всплывающее окно с отзывами. Исправлено.

[!] Модули: ПЭК: При расчете стоимости доставки могла появляться PHP ошибка. Исправлено.

[!] Модули: Подарочные сертификаты: При просмотре деталей заказа сумма налога в некоторых случаях отображалась некорректно. Исправлено.

[!] Модули: Подарочные сертификаты: Таблица со списком подарочных сертификатов выходила за границы страницы, если в полях "От кого", "Кому" были длинные значения. Исправлено.

[!] Модули: Поставщики: Если в настройках не была задана страна по-умолчанию, то при создании поставщика не отображалось поле регион. Исправлено.

[!] Модули: Поставщики: Уведомления: В модуле присутствовали нерабочие настройки для отправки уведомлений. Исправлено.

[!] Модули: Расширенный импорт товаров: Настройка "Разделитель изображений" была скрыта для файлов формата CSV. Исправлено.

[!] Модули: Расширенный импорт товаров: Когда товары при импорте пропускались из-за несоответствия настройке "Стратегия импорта", то в отчёте об импорте эти пропущенные товары не учитывались. Исправлено.

[!] Модули: Российские способы оплаты: Для заказов со способом оплаты "Выставить счет" отсутствовала кнопка "Отправить'". Исправлено.

[!] Модули: Склады [Beta]: Импорт: При импорте товара с количеством не для всех складов, общее количество товара рассчитывалось неправильно. Исправлено.

[!] Модули: Центр сообщений: На витрине не работали некоторые ссылки. Исправлено.

[!] Модули: Центр сообщений: На странице заказа не отображался ID диалога. Исправлено

[!] Модули: Центр сообщений: Не приходили уведомления в центр уведомлений если установлен старый режим редактирования email-уведомлений. Исправлено.

[!] Модули: ЮKassa: При включенном холдировании платежей, статус оплаченного заказа не менялся, хотя уведомление приходило. Исправлено.

[!] Модули: Яндекс.Доставка: При оформлении черновика заказа в сервисе Яндекс.Доставка, данные о службе доставки не передавались в полном объеме. Исправлено.

[!] Модули: Яндекс.Метрика: Если в магазине было несколько витрин, автоматические цели не создавались. Исправлено.

[!] Модули: Яндекс.Метрика: Если в магазине было несколько витрин, то в некоторых случаях ссылка для обновления токена могла не отображаться. Исправлено.

[!] Модули: CommerceML: Когда для настройки "Если у товара в CRM меняется изображение" была выбрана стратегия "Заменить все изображения товара", то главное изображение товара импортировалось некорректно. Исправлено.

[!] Модули: Email-маркетинг: Во время рассылки через сервис "MailChimp" была повышенная нагрузка на сервер. Исправлено.

[!] Модули: PDF-документы: В браузере Safari для некоторых языков PDF-файлы скачивались с некорректной кодировкой в названии. Исправлено

[!] Модули: Pickpoint: Расчет доставки завершался ошибкой. Исправлено

[!] Модули: SEO: Блог: Страницы с заголовком на языке, отличном от латиницы, не открывались на витрине. Исправлено

[!] Модули: SEO: В некоторых случаях при включенной настройке «Показывать дополнительные языки в URL» поля в диалоговых окнах были на языке, отличном от выбранного. Исправлено.

[!] Модули: SEO: При использовании скрытого языка попытка предпросмотра товара приводила к ошибке. Исправлено

[!] Модули: SEO: При создании 301-редиректа с типом "Другое" в URL автоматически обрезались слэши. Исправлено

[!] Модули: SEO: Характеристики товаров: Код характеристики мог не влиять на JSON+LD микроформат разметки на страницах товаров. Исправлено.

[!] Настройки: Витрины: Компании: Переключатель витрин не отображался на некоторых страницах настроек. Исправлено

[!] Нижняя панель: Ссылка на панель администратора могла вести на страницу, для которой у пользователя не было прав доступа. Исправлено.

[!] Панель администратора: Заказы: В контекстном меню показывались не все элементы при просмотре на экране с шириной меньше 770px. Исправлено.

[!] Поля профиля: Не учитывались поля "Имя" и "Фамилия" при отправке на дополнительный адрес доставки. Исправлено.

[!] Способы доставки: В настройках способа доставки никак не отмечались отключенные тарифные зоны. Исправлено.

[!] Товары: Опции: Опция в общем товаре отображалась даже в случае, когда она не доступна для витрины. Исправлено.

[!] Товары: Редактор подробного описания товаров: Интерфейс был не полностью переведён на русский язык. Исправлено.

[!] Товары: Сравнение: Могло отображаться пустое уведомление "Товар добавлен в cписок сравнения". Исправлено.

[!] Товары: Уведомление о появлении товара в наличии отправлялось, когда статус товара был "Выкл." или "Скрыто". Исправлено.

[!] Товары: Характеристики: При переносе товара без характеристики в другую категорию отображались некорректные предупреждения о недоступности характеристики для этого товара. Исправлено.

[!] Экспорт/Импорт: Оптовые скидки: Группу пользователей можно было создать через импорт оптовых скидок под аккаунтом продавца. Исправлено

[!] Экспорт/Импорт: Если в названии группы характеристик были скобки, характеристики могли импортироваться неправильно. Исправлено.

[!] Ядро: Если в поисковом запросе присутствовал символ %, то при перезагрузке страницы с помощью AJAX получали ошибку. Исправлено.

[!] Ядро: Изображения: В некоторых случаях при включенном твике "lazy_thumbnails" ссылки на изображения были некорректными. Исправлено.

[!] Ядро: При использовании HTTP аутентификации, могла возникнуть PHP ошибка. Исправлено.

[!] API: Отгрузки: Невозможно было обновить существующую отгрузку, используя API. Исправлено.

[!] API: При включенном редиректе на витрины другого региона API работало некорректно. Исправлено

[!] Multi-Vendor: Бухгалтерский учет: Баланс продавца не менялся после отклонения администратором выплаты. Исправлено.

[!] Multi-Vendor: Дизайн: Страницы: Содержимое блока с заполнением "Страницы продавца" не обновлялось при переходе в микромагазин другого продавца. Исправлено.

[!] Multi-Vendor: Мастер настройки магазина: В некоторых случаях параметр «Включить отслеживание количества товаров» не работал. Исправлено.

[!] Multi-Vendor: Модули: Бонусные баллы: Начисление баллов за заказ с товарами от разных продавцов работало некорректно. Исправлено.

[!] Multi-Vendor: Модули: Карта сайта для Yandex и Google: В карте сайта отсутствовали ссылки на микромагазины продавцов. Исправлено.

[!] Multi-Vendor: Модули: Местоположение продавцов [Beta]: Выбор местоположения не работал. Исправлено.

[!] Multi-Vendor: Модули: Местоположение продавцов [Beta]: Фильтры товаров: Нужная область ползунка фильтра не подсвечивалась. Исправлено.

[!] Multi-Vendor: Модули: Оплата от продавцов администратору: Валюты: Настройки модуля игнорировали выбранное положения символа валюты относительно суммы. Исправлено.

[!] Multi-Vendor: Модули: Отзывы и комментарии: Создание нового продавца связывало с ним отзывы о магазине, что могло приводить к их утрате, при удалении продавца. Исправлено.

[!] Multi-Vendor: Модули: Переключение между витринами было доступно для модулей, которые не поддерживают мультивитринность. Исправлено

[!] Multi-Vendor: Модули: Подарочные сертификаты: К промо-акции для корзины можно было добавить бонус "Подарочный сертификат". Исправлено.

[!] Multi-Vendor: Модули: Премодерация данных продавцов: Товары, созданные продавцом в мобильном приложении, не попадали под действие настроек модуля. Исправлено.

[!] Multi-Vendor: Модули: Тарифные планы для продавцов: Импорт/Экспорт: Обновление товара импортом при отсутствующей колонке категорий пропускало товар. Исправлено.

[!] Multi-Vendor: Модули: Тарифные планы для продавцов: Комиссия продавца могла быть рассчитана неправильно, если расчёт налога был по цене за единицу товара. Исправлено.

[!] Multi-Vendor: Модули: Тарифные планы для продавцов: На странице регистрации продавцов нельзя было скрыть поле выбора плана. Исправлено.

[!] Multi-Vendor: Модули: Тарифные планы для продавцов: Не создавался новый план на странице редактирования/добавления продавца. Исправлено.

[!] Multi-Vendor: Модули: Тарифные планы для продавцов: Некоторые ссылки в модуле "Тарифные планы для продавцов" были некорректными. Исправлено.

[!] Multi-Vendor: Модули: Экспорт в Яндекс.Маркет: Параметры товарных предложений в панели администратора отображались некорректно. Исправлено.

[!] Multi-Vendor: Модули: Экспорт в Яндекс.Маркет: Редактирование категорий могло отображать ошибку "Доступ запрещён". Исправлено

[!] Multi-Vendor: Настройки: Витрины: Настройки витрины игнорировировались и были недоступными для изменения, когда витрина оставалась одна. Исправлено.

[!] Multi-Vendor: Пользователи: Профили: Если страна пользователя не сопадала со страной по умолчанию, то в панели продавца значение поля "Область/район" этого пользователя отображалось некорректно. Исправлено.
 
[!] Multi-Vendor: Промо-акции и скидки: Способы доставки: Способы доставки продавцов были недоступны администратору маркетплейса в промо-акциях. Исправлено.

[!] Multi-Vendor: Расширенный поиск: Продавцы: Если медленно вводить имя продавца, то поле теряло фокус. Исправлено.

[!] Multi-Vendor Plus: Модули: Общие товары для продавцов: Когда общий товар выставляется на витрину продавцом, администратор все еще мог изменить его владельца на конкретного продавца, что приводило к появлению дубликатов товара. Исправлено.

[!] Multi-Vendor Plus: Модули: Общие товары для продавцов: Не работало выделение общих товаров в панели продавца. Исправлено.

[!] Multi-Vendor Plus: Модули: Общие товары для продавцов: Продавцы: Мобильное приложение: Товары продавца не отображались на его странице, если они были созданы как вариации общего товара. Исправлено.

[!] Multi-Vendor Plus: Модули: Общие товары для продавцов: Экспорт/Импорт: Импорт товарных предложений для общих товаров игнорировал настройку "Cтратегия импорта" у пресета. Исправлено.

[!] Multi-Vendor Plus: Модули: Оплата напрямую продавцам: Бухгалтерский учет: Изменения заказа некорректно отображались в информации о выплатах. Исправлено.

[!] Multi-Vendor Plus: Модули: Оплата напрямую продавцам: Когда администратор входил на витрину от имени покупателя при включенном модуле, корзина этого покупателя очищалась. Исправлено.

[!] Multi-Vendor Plus: Модули: Оплата напрямую продавцам: Не удалялись товары из списка желаемых товаров. Исправлено.

[!] Multi-Vendor Plus: Модули: Оплата напрямую продавцам: Стоимость доставки во всплывающем окне расчета доставки не менялась при выборе другого варианта. Исправлено.

[!] Multi-Vendor Plus: Модули: Привилегии продавцов: Группы пользователей: При создании продавца из учетной записи покупателя ему не присваивалась группа пользователей "Продавец". Исправлено

[!] Multi-Vendor Plus: Модули: Расширенный импорт товаров: Общие товары для продавцов: Продавец мог создавать общие товары, используя импорт общего пресета. Исправлено.

[!] Multi-Vendor Plus: Модули: Рейтинг продавцов: Не сохранялось значение в поле "Рейтинг тарифного плана, заданный вручную" в настройках тарифного плана. Исправлено.

[!] Multi-Vendor Plus: Модули: Тарифные планы для продавцов: Комиссии для категорий: При оформлении заказа с нулевой ценой на сервере возникали ошибки. Исправлено.

[!] Multi-Vendor Ultimate: Заказы: Витрины: В некоторых случаях не работало разделение заказов по витринам. Исправлено.

[!] Multi-Vendor Ultimate: Модули: Фулфилмент от маркетплейса [Beta]: Когда переход на другой тарифный план затрагивал изменение доступа к фулфилменту, уведомление об этом могло не появиться. Исправлено.

[!] Multi-Vendor Ultimate: Модули: Фулфилмент от маркетплейса [Beta]: При регистрации нового продавца появлялось уведомление как при смене тарифного плана. Исправлено

[!] Multi-Vendor Ultimate: Модули: Фулфилмент от маркетплейса [Beta]: Мобильное приложение: Способ доставки дублировался при оформлении заказа. Исправлено.

[!] Multi-Vendor Ultimate: Темы: Шаблоны: Кэш: Разделы, добавляемые блоками, не отображались на одной из витрин, если витрины использовали разные темы. Исправлено.

[!] Multi-Vendor Ultimate: Товары: На странице брендов могли выводиться недоступные на данной витрине бренды. Исправлено.

[!] REST API: Товары: Характеристики: При обновлении некоторых типов характеристик товара через API, значение характеристики не обновлялось. Исправлено.

[!] UI/UX: На iPhone страница увеличивалась после закрытия диалогового окна, в котором для поля был установлен автофокус. Исправлено.
