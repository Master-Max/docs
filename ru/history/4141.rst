******
4.14.1
******
==================================
Новая функциональность и улучшения
==================================

[+] Мобильное приложение: Добавлена возможность входа в учетную запись через Facebook для устройств с iOS.

[+] Мобильное приложение: Добавлена поддержка модуля "Отзывы о товарах".

[+] Модули: Баннеры: Для блока баннеров добавили возможность задавать размеры изображений.

[+] Модули: Добавлен новый модуль для интеграции магазина на CS-Cart со страницами из Tilda.

[+] Модули: Комплекты товаров: Добавлен новый модуль.

[+] Модули: Служба доставки — СДЭК: Добавлена поддержка доставки в СДЭК постаматы.

[+] Модули: CommerceML [Beta]: Добавлен учет налогов, которые можно применять к товару в заказе.

[+] Модули: CommerceML [Beta]: Старые директории импорта теперь удаляются.

[+] Модули: Unisender: Контекстное меню: На странице "Покупатели" из шестеренки был перенесён пункт меню "Добавить в Unisender отмеченных пользователей" в контекстное меню.

[+] Настройки: Витрины: Разработан интерфейс быстрого добавления языков и валют на детальную страницу витрины.

[+] Пользователи: Теперь можно разрешить пользователям запрашивать удаление своей учётной записи со страницы профиля. Кнопка включается в разделе Настройки → Общие.

[+] Редактор документов: ИНН добавлен в переменные компании.

[+] Способы доставки: Добавлен вариант процентной ставки для надбавки или скидки.

[+] Статусы заказов: Теперь запрещено менять поле "Расчет кол-ва товаров в наличии" для статусов заказа "Открытый" и "Обработан".

[+] Multi-Vendor: Категории: Теперь вы можете привязать категории к определенной витрине или сделать их общими для всех витрин.

[+] Multi-Vendor: Мобильное приложение: Теперь продавцы могут менять характеристики товаров через приложение.

[+] Multi-Vendor: Модули: Конфигуратор панели продавцов: Добавлен новый модуль, который упрощает панель продавцов.

[+] Multi-Vendor: Модули: Оплата от продавцов администратору: Добавлена возможность получать налоги при пополнении баланса продавцом.

[+] Multi-Vendor: Модули: Платежи через Stripe Connect: Реализовано подключение Express аккаунтов.

[+] Multi-Vendor: Продавцы: Добавлена настройка "Проверка новых продавцов до предоставления доступа к панели администратора". Новые продавцы будут получать статус "Новый" или "Вкл.".

[+] Multi-Vendor: Уведомления: Теперь можно задавать email-адреса продавцов для конкретных типов уведомлений.

[+] Multi-Vendor Ultimate: Модули: Фулфилмент от маркетплейса [Beta]: Магазины и пункты самовывоза: Добавлена возможность создавать пункты самовывоза маркетплейса и использовать их в способе доставки "Самовывоз".

[+] UI/UX: Витрины: Изменен элемент массового выбора сущностей для валют и языков.

[+] UI/UX: Изменены элементы массового выбора свойств.

=========================================
Изменения в существующей функциональности
=========================================

[*] Модули: Возврат товаров: Дополнительный сбор за использование способа оплаты больше не возвращается.

[*] Модули: Калькулятор стоимости доставки eDost.ru: Улучшен список пунктов самовывоза на странице оформления заказа.

[*] Модули: Отзывы о товарах: Производительность: На детальной странице товара снижено количество запросов к базе данных.

[*] Multi-Vendor: Дизайн: Блоки: Способы доставки: Добавлена возможность редактировать текст уведомления «Не требуется доставка» и отключать это уведомление на странице оформления заказа.

[*] Multi-Vendor: Мастер настройки маркетплейса: Переделан раздел "Продавцы".

[*] Multi-Vendor: Панель продавца: Товары: Кнопка добавления товара на списке товаров в панели продавца теперь также предлагает ссылку на импорт товаров.

[*] Multi-Vendor: Способы доставки: Добавлена возможность включать общие способы доставки для новых продавцов автоматически.

==================
Исправления ошибок
==================

[!] Администрирование: Файлы: Скачанный из менеджера файлов архив с несколькими файлами нельзя было открыть. Исправлено.

[!] Витрины: Администратор, назначенный на конкретную витрину, мог иметь доступ к управлению данными с других витрин. Исправлено.

[!] Дизайн: Макеты: Блоки: Удаление блока в макете перенаправляло пользователя на страницу макета по умолчанию. Удаление блока в секции перенаправляло пользователя на страницу со списком блоков. Исправлено.

[!] Дизайн: Панель администратора: Некорректно отображалась страница со списком покупателей, если у покупателей длинные имена и фамилии. Исправлено.

[!] Дизайн: Товары: Контекстное меню: Флажки и текст были на разных уровнях, когда пользователь выбирал редактируемые поля выбранных элементов. Исправлено.

[!] Заказы: Отгрузки: Лишние символы отображались в названии кнопки. Исправлено.

[!] Категории: В некоторых случаях при удалении категорий "категория-корзина" не создавалась. Исправлено.

[!] Категории: Страница массового редактирования выбранных категорий открывалась, когда была нажата кнопка Enter. Исправлено.

[!] Корзина: При выборе опций менялся порядок товаров в корзине. Исправлено

[!] Корзина: Способы доставки: Поле области/региона исчезало при смене страны. Исправлено.

[!] Меню: Проверка активной страницы в меню работала некорректно. Исправлено.

[!] Мобильное приложение: При включенной опции "Доступ только для авторизованных покупателей" страницы не открывались. Исправлено.

[!] Мобильное приложение: Цвет заголовка для блока Страницы не менялся. Исправлено.

[!] Мобильное приложение: Цвет статус-бара нельзя было изменить. Исправлено.

[!] Модули: Вариации товаров: Склады: Главная вариация не изменялась, когда заканчивался товар на складе. Исправлено.

[!] Модули: Вариации товаров: Товары: После сохранения товара его название название отображалось на языке панели администратора, а не на языке контента. Исправлено.

[!] Модули: Карты и геолокация: Когда в настройках модуля включено отображение стоимости и сроков доставки на страницах товаров, то на витрине на странице товара с нулевой ценой появлялось уведомление, что товар не добавлен в корзину.

[!] Модули: Магазины и пункты самовывоза: Выпадающий список выбора города отображался некорректно на языке RTL. Исправлено.

[!] Модули: Мобильное приложение: В архив с настройками не выгружалась переменная, отвечающая за отступы от экрана. Исправлено.

[!] Модули: Отзывы: Фильтр по опции "С фото" некорректно работал, если у товара не было отзывов с изображениями. Исправлено.

[!] Модули: Платежи через Stripe: Чехия, Мальта и другие страны были добавлены в список поддерживаемых стран.

[!] Модули: Подарочные сертификаты: Если в сумме сертификата был использован неразрывной пробел, он отображался в виде кода. Исправлено.

[!] Модули: Рассылки: Подписка на рассылку могла быть отменена при размещении заказа покупателем. Исправлено.

[!] Модули: Рассылки: Подписчики: Кнопка для разворачивания не работала на мобильных устройствах. Исправлено.

[!] Модули: Склады: Когда в корзине было больше товара, чем есть на ближайшем складе, уведомление о задержке доставки не отображалось. Исправлено.

[!] Модули: Склады: Экспорт/Импорт: Импорт количества товаров на складе не работал, если товар до этого не был разделён по складам. Исправлено.

[!] Модули: Склады: При оформлении заказа появлялась ошибка если разрешено отрицательное количество товаров в наличии. Исправлено.

[!] Модули: Соответствие GDPR: Отзывы и комментарии: При экспорте XML данных пользователя возникали PHP ошибки. Исправлено.

[!] Модули: Центр Сообщений: Покупателю приходили уведомления на языке администратора. Исправлено.

[!] Модули: Центр сообщений: Администратора мог отправлять сообщения незарегистрированному покупателю. Исправлено.

[!] Модули: Экспорт в Яндекс.Маркет: Значения параметров "TypePrefix" и "Модель" у товаров могли не наследовать значения, заданные в настройках параметров товарых предложений. Исправлено.

[!] Модули: Экспорт в Яндекс.Маркет: Если в магазине было больше одной витрины прайс-лист невозможно было сохранить после создания. Исправлено.

[!] Модули: CommerceML [Beta]: Была возможность помечать стандартные поля профиля на экспорт при выгрузке заказов. Исправлено.

[!] Модули: CommerceML [Beta]: При выгрузке заказов в систему учета отображалась валюта заказа вместо базовой валюты. Исправлено.

[!] Модули: CommerceML [Beta]: При импорте обрезались значения числовых характеристик. Исправлено.

[!] Модули: CommerceML [Beta]: При обмене заказами с системой учёта, у сопоставленных налогов вместо их значения выгружался их идентификатор. Исправлено.

[!] Модули: CommerceML [Beta]: Если не импортировать полное описание товара, то в некоторых случаях на витрине оно отображалось без переносов текста. Исправлено.

[!] Модули: CommerceML [Beta]: При обмене данными могла возникнуть ошибка "Huge input lookup". Исправлено.

[!] Модули: CommerceML [Beta]: Значения характеристик с типом "Группа флажков" не привязывались к товару. Исправлено.

[!] Модули: CommerceML: При обмене данными могла возникнуть ошибка "Huge input lookup". Исправлено.

[!] Модули: Google Analytics: Не фиксировались данные о товарах в информации о транзакциях с использованием Universal code. Исправлено.

[!] Модули: SEO: Некоторые SEO-анализаторы сообщали об изменении страниц из-за меняющегося при каждой загрузке исходного кода. Исправлено.

[!] Налоги: Тарифные зоны: Новая тарифная зона не появлялась в настройках существующих налогов. Исправлено.

[!] Настройки: Оформление заказа: Поле "Регионы" было обязательным на странице Настройки → Оформление заказа. Исправлено.

[!] Настройки: Уведомление об изменении глобальных/индивидуальных настроек не появлялось при уходе со страницы. Исправлено.

[!] Оформление заказа: E-mail покупателя не сохранялся на странице оформления заказа в некоторых случаях. Исправлено.

[!] Оформление заказа: Поля профиля: Поля адреса доставки некорректно отображались в некоторых случаях, а также их нельзя было удалить из заказа. Исправлено.

[!] Оформление заказа: Способы доставки: При включенной настройке "Показывать недоступные способы доставки" и отсутствии доступного способа доставки для выбранной тарифной зоны, отображалась кнопка "Оформить заказ". Исправлено.

[!] Опции: Недоступные комбинации: Недоступные комбинации опций работали некорректно. Исправлено.

[!] Панель администратора: Возникала js-ошибка из-за плагина LazyLoader. Исправлено.

[!] Панель администратора: Заказы: Обратный звонок: Кнопка "Товары в корзине" не работала на мобильных устройствах. Исправлено.

[!] Поля профиля: Поле ввода номера телефона работало неправильно на устройствах с Android, если использовался международный формат номеров. Исправлено.

[!] Производительность: Шрифты: До загрузки пользовательского шрифта текст не отображался. Исправлено.

[!] Промо-акции и скидки: Характеристики: Использование характеристики с типом фильтра и внешним видом "Флажок" в условиях промо-акции могло не давать скидки. Исправлено.

[!] Промо-акции и скидки: Некоторые варианты условий для промо-акций могли не отображаться при редактировании. Исправлено.

[!] Пользователи: Покупатели могли создать пользователя с дублированным символом @ в поле E-mail. Исправлено.

[!] Секция помощи: Отображение блоков в столбцах не всегда было корректным. Исправлено.

[!] Статусы: Уведомления: В настройках статуса заказа отображались неактуальные настройки уведомлений. Исправлено.

[!] Страницы: Карта сайта: Страницы-ссылки отображались на карте сайта. Исправлено.

[!] Товары: Опции: Не сохранялось нулевое значение для опций типа Текст/Текстовая область. Исправлено.

[!] Товары: Подписчики: Если гость подписался на уведомление о появлении товара, то при обновлении страницы флажок не сохранялся. Исправлено.

[!] Товары: Подписчики: Флажок подписки на уведомление о получении товаров не снимался, если пользователь не авторизовался и не ввел электронную почту. Исправлено.

[!] Товары: Продаваемые файлы: Вкладки: При редактировании файла могло открыться окно редактирования вкладки и наоборот. Исправлено.

[!] Экспорт/Импорт: При отсутствии пробела между названием категории и названием характеристики, характеристики импортировались некорректно. Исправлено.

[!] Ядро: Страницы 403 и 404 отображались некорректно, если init-контроллер был расширен с помощью init.pre.php. Исправлено.

[!] Multi-Vendor: Заказы: При покупке товаров от разных продавцов без обязательной доставки могли появиться заказы, в которых эти продавцы не соответствует их товарам. Исправлено.

[!] Multi-Vendor: Меню: В меню панели продавца подсвечивалась некорректная вкладка. Исправлено.

[!] Multi-Vendor: Мобильное приложение: Невозможно было выбрать разные способы доставки для товаров от разных продавцов. Исправлено.

[!] Multi-Vendor: Модули: Вариации товаров: Дизайн: Таблица выходила за пределы страницы, если у продавца было длинное имя. Исправлено.

[!] Multi-Vendor: Модули: Возврат товаров: Налог на стоимость доставки мог быть возвращен, даже если сама стоимость доставки не была возвращена. Исправлено.

[!] Multi-Vendor: Модули: Возврат товаров: Сумма возврата могла быть вычислена неправильно, если налоги рассчитывались по цене за единицу. Исправлено.

[!] Multi-Vendor: Модули: Возврат товаров: Тарифные планы для продавцов: Расчет выплат по итогам заказа был неверным, если заказ оплачивался с помощью платежного метода, содержащего дополнительный сбор, облагаемый налогом. Исправлено.

[!] Multi-Vendor: Модули: Возврат товаров: Цена товара могла быть неправильной на странице создания возврата. Исправлено.

[!] Multi-Vendor: Модули: Водяные знаки: При импорте товаров сбрасывались настройки модуля. Исправлено.

[!] Multi-Vendor: Модули: Магазины и пункты самовывоза: Склады: Продавец мог видеть общее количество магазинов и складов в маркетплейсе. Исправлено.

[!] Multi-Vendor: Модули: Магазины и пункты самовывоза: Склады: Продавцы могли видеть чужие склады и не могли задавать приоритет списания товаров. Исправлено.

[!] Multi-Vendor: Модули: Оплата напрямую продавцам: Заказы: При создании заказа из панели администратора, покупателем всегда назначался текущий пользователь. Исправлено.

[!] Multi-Vendor: Модули: Платежи через Stripe Connect: При включенном 3-D Secure комиссия маркетплейса рассчитывалась неправильно. Исправлено.

[!] Multi-Vendor: Модули: Премодерация данных продавцов: Возникала ошибка при редактировании заказа. Исправлено.

[!] Multi-Vendor: Модули: Премодерация данных продавцов: Меню модерации продавцов не отображалось, когда была включена только проверка новых продавцов в настройках. Исправлено.

[!] Multi-Vendor: Модули: Премодерация данных продавцов: Панель инструментов: В блоке "Товары на проверке" не подсчитывались товары неподтверждённых продавцов. Исправлено.

[!] Multi-Vendor: Модули: Премодерация данных продавцов: Обновление скачиваемого файла не меняло статус товара на "требующий модерации". Исправлено.

[!] Multi-Vendor: Оформление заказа: Было невозможно купить товары от разных продавцов, часть из которых не используют способы доставки. Исправлено.

[!] Multi-Vendor: Пользователи: Некорректно работала настройка "Период использования пароля до замены в днях". Исправлено.

[!] Multi-Vendor: Продавцы: Бухгалтерский учёт: Кнопка для разворачивания не работала на мобильных устройствах. Исправлено.

[!] Multi-Vendor: Продавцы: Профили: Не отображалось значение региона по-умолчанию у нового покупателя в панели продавца. Исправлено.

[!] Multi-Vendor: Продавцы: Кнопка сохранения изменений отображалась на странице редактирования учетной записи покупателя в панели продавца. Исправлено.
 
[!] Multi-Vendor: Способы доставки: Продавцы: Если у товара была включена опция бесплатной доставки, а у самого способа доставки отключена, то на странице оформления заказа отображалось некорректное сообщение об ошибке. Исправлено.

[!] Multi-Vendor: API: Товары: Продавец мог обновить или удалить товар другого продавца с помощью API. Исправлено.

[!] Multi-Vendor Plus: Модули: Общие товары для продавцов: Цена продавца, привязанного к одной витрине, учитывалась при выставлении минимальной цены общего товара. Исправлено.

[!] Multi-Vendor Plus: Модули: Общие товары для продавцов: Общие товары не отображались в результатах поиска в блоках макета. Исправлено.

[!] Multi-Vendor Plus: Модули: Общие товары для продавцов: Цены продавцов отображались даже когда в настройках оформления заказа выбран вариант "Прятать цену и кнопку добавления товара в корзину". Исправлено.

[!] Multi-Vendor Plus: Модули: Тарифные планы для продавцов: Комиссии для категорий: Подарочные сертификаты: Баланс продавца пополнялся, если заказ был полностью оплачен подарочным сертификатом. Исправлено. 

[!] Multi-Vendor Ultimate: Модули: Фулфилмент от маркетплейса: Налоги при оформлении заказа рассчитывались неправильно. Исправлено.

[!] WYSIWYG: Redactor II: HTML-редактор не работал, если был выбран бразильский вариант португальского языка. Исправлено.