******
4.14.1
******

==================================
Новая функциональность и улучшения
==================================

[+] Мобильное приложение: Добавлена поддержка модуля "Отзывы о товарах".

[+] Мобильное приложение: Теперь продавцы могут менять характеристики товаров через приложение.

[+] Мобильное приложение: Теперь, если витрина закрыта, в приложении отображается сообщение, что магазин временно закрыт.

[+] Модули: CommerceML [Beta]: Добавлен учет налогов, которые можно применять к товару в заказе.

[+] Модули: CommerceML: Старые директории импорта теперь удаляются.

[+] Модули: Unisender: Контекстное меню: На странице "Покупатели" из шестеренки был перенесён пункт меню "Добавить в Unisender отмеченных пользователей" в контекстное меню.

[+] Модули: Карты и геолокация: На странице настроек модуля добавлено отображение карты для проверки корректности API ключа.

[+] Модули: Комплекты товаров: Добавлен новый модуль.

[+] Модули: Мобильное приложение: Теперь в настройках модуля можно выбрать готовую цветовую схему.

[+] Модули: Отзывы о товарах: Вариации товаров: Теперь вы можете сделать отзывы общими между вариациями как отдельные товары.

[+] Модули: Служба доставки — СДЭК: Добавлена поддержка доставки в СДЭК постаматы.

[+] Настройки: Витрины: Разработан интерфейс быстрого добавления языков и валют на детальную страницу витрины.

[+] Продавцы: Премодерация данных продавцов: Добавлено оповещение администратора о новом продавце при автоматическом подтверждении аккаунта.

[+] Способы доставки: Добавлен вариант процентной ставки для надбавки или скидки.

[+] Статусы заказов: Теперь запрещено менять поле "Расчет кол-ва товара в наличии" для статусов заказа "Открытый" и "Обработан".

[+] Multi-Vendor: Категории: Теперь вы можете привязать категории к определенной витрине или сделать их общими для всех витрин.

[+] Multi-Vendor: Модули: Stripe Connect: Реализовано подключение Express аккаунтов.

[+] Multi-Vendor: Модули: Конфигуратор панели продавцов: Добавлен новый модуль, который упрощает панель продавцов.

[+] Multi-Vendor: Модули: Оплата от продавцов администратору: Добавлена возможность получать налоги при пополнении баланса продавцом.

[+] Multi-Vendor: Модули: Платежи через Stripe Connect: В описания платежей добавлено название маркетплейса и номер заказа.

[+] Multi-Vendor: Продавцы: Добавлена настройка "Проверка новых продавцов до предоставления доступа к панели администратора". Новые продавцы будут получать статус "Новый" или "Вкл.".

[+] Multi-Vendor: Центр уведомлений: Теперь можно задавать email-адреса продавцов для конкретных типов уведомлений.

[+] UI/UX: Витрины: Изменен элемент массового выбора сущностей для валют и языков.

[+] UX/UI: Изменены элементы массового выбора свойств.

=========================================
Изменения в существующей функциональности
=========================================

[*] Мобильное приложение: Добавлено два новых статуса товара: "Требует проверки" и "Отклонён".

[*] Модули: SEO: Теперь, если SEO-имя введено в некорректном формате выводится соответствующее оповещение.

[*] Модули: Калькулятор стоимости доставки eDost.ru: Улучшен список пунктов самовывоза на странице оформления заказа.

[*] Модули: Мобильное приложение: Рамки скриншотов телефонов обновлены до iPhone 13. Добавлена возможность сворачивать/разворачивать секцию "Дополнительно".

[*] Модули: Мобильное приложение: Теперь настройки мобильного приложения разделены на 2 вкладки: настройки, требующие выпуска новой версии приложения и настройки, которые можно изменить на лету.

[*] Модули: Отзывы о товарах: Производительность: На детальной странице товара снижено количество запросов к базе данных.

[*] Модули: Экспорт в Яндекс.Маркет: Элемент currencies был исключен из yml прайс-листа.

[*] Multi-Vendor: Витрины: Языки: Теперь нельзя выбрать язык витрины по умолчанию, если он не доступен для этой витрины.

[*] Multi-Vendor: Дизайн: Блоки: Способы доставки: Добавлена возможность редактировать текст уведомления «Не требуется доставка» и отключать это уведомление на странице оформления заказа.

[*] Multi-Vendor: Мастер настройки магазина: Переделан раздел Продавцы.

[*] Multi-Vendor: Мастер настройки магазина: Переделан раздел Продавцы.

[*] Multi-Vendor: Модули: Премодерация данных продавцов: Обновлён интерфейс настроек.

[*] Multi-Vendor: Панель продавца: Товары: Кнопка добавления товара на списке товаров в панели продавца теперь также предлагает ссылку на импорт товаров.

[*] Multi-Vendor: Ядро: Способы доставки: Добавлена возможность включать общие способы доставки для новых продавцов автоматически.

==================
Исправления ошибок
==================

[!] Витрины: Не скроллится список стран в CS-Cart Ultimate. Исправлено.

[!] Витрины: Языки: В некоторых случаях язык витрины по умолчанию мог быть не доступен для неё. Исправлено.

[!] Витрины: Языки: При отключении языка на витрине, он мог быть недоступен и в панели администратора. Исправлено.

[!] Дизайн: Блоки: Не обновлялся список блоков при удаление блока через шестерёнку. Исправлено.

[!] Дизайн: Группы пользователей: При смене статуса группы пользователя отображалась некорректная опция "Информировать покупателя". Исправлено

[!] Дизайн: Оформление заказа: Номер телефона отображался некорректно в RTL языках. Исправлено.

[!] Дизайн: Страницы: Не обновлялось содержимое блока с заполнением Страницы продавца при переходе в микромагазин другого продавца. Исправлено.

[!] Заказы: Витрины: В некоторых случаях при оформлении заказа, он мог не привязаться к витрине. Исправлено.

[!] Заказы: Языки: При создании заказа в него записывался язык магазина, а не язык покупателя. Исправлено

[!] Категории: В некоторых случаях при удалении всех категорий "категория-корзина" могла не создаться. Исправлено.

[!] Корзина: Если у товара было изменено изображение, в мини-корзине оно оставалось прежним даже после окончания сессии пользователя. Исправлено.

[!] Корзина: Промо-акции и скидки: Авторизованный покупатель не мог изменить опцию товара из промо-акции. Исправлено.

[!] Корзина: Цены на товары в блоке "Корзина" не учитывали примененные к товарам в корзине промо-акции. Исправлено.

[!] Макеты: Информация о создании нового макета, путем копирования данных с другого макета, могла быть неправильно понятой. Исправлено.

[!] Макеты: Секция выходила за границы, если у родительской секции был отступ. Исправлено.

[!] Мобильное приложение: Для цифровых товаров отображалась надпись "Нет в наличии". Исправлено.

[!] Мобильное приложение: Карточки товаров некорректно отображались на некоторых устройствах. Исправлено.

[!] Мобильное приложение: Не работала прокрутка при просмотре страниц в WebView на некоторых устройствах. Исправлено.

[!] Мобильное приложение: Невозможно было выбрать разные способы доставки для товаров от разных продавцов. Исправлено.

[!] Мобильное приложение: Некоторые тексты отображались на английском без перевода. Исправлено

[!] Мобильное приложение: При включенной опции "Доступ только для авторизованных покупателей" страницы не открывались. Исправлено.

[!] Мобильное приложение: Приложение зависало при первом запуске. Исправлено.

[!] Модули:  Ограничение доступа: Модуль мог препятствовать работе скрипта при запуске из интерфейса командной строки. Исправлено.

[!] Модули: CommerceML: При выборе стратегии в случае: "Если у товара в CRM меняется изображение", как "Заменить все изображения товара", главное изображение товара импортировалось некорректно. Исправлено.

[!] Модули: CommerceML:  В выгрузке заказов, у контрагента покупателя была указана роль "Продавец". Исправлено.

[!] Модули: Email-маркетинг: Во время рассылки через сервис "MailChimp" была повышенная нагрузка на сервер. Исправлено.

[!] Модули: PDF-документы: В браузере Safari для некоторых языков PDF-файлы скачивались с некорректной кодировкой в названии. Исправлено

[!] Модули: Pickpoint: Расчет доставки завершался ошибкой. Исправлено

[!] Модули: SEO: Блог: Страницы с заголовком на языке, отличном от латиницы, не открывались на витрине. Исправлено

[!] Модули: SEO: В некоторых случаях, при включенной настройке «Показывать дополнительные языки в URL», поля в диалоговых окнах были на языке, отличном от выбранного. Исправлено.

[!] Модули: SEO: При использовании скрытого языка попытка предпросмотра товара приводила к ошибке. Исправлено

[!] Модули: SEO: При создании 301-редиректа с типом "Другое" в URL автоматически обрезались слэши. Исправлено

[!] Модули: SEO: Характеристики товаров: Код характеристики мог не влиять на JSON+LD микроформат разметки на страницах товаров. Исправлено.

[!] Модули: Бонусные баллы: Начисление баллов за заказ с товарами от разных продавцов работало некорректно. Исправлено.

[!] Модули: Вариации товаров: Переключение опций и вариантов не работало в быстром просмотре. Исправлено.

[!] Модули: Вариации товаров: API: Группу вариаций можно было создать на основе характеристик с неподходящими для этого целями. Исправлено.

[!] Модули: Вариации товаров: При нажатии «Сохранить» на вкладке «Вариации», изменения товара не сохранялись. Исправлено.

[!] Модули: Вариации товаров: Характеристики: Невозможно было добавить какую-либо категорию характеристике с целью "Вариации как один товар" в случае, если у товаров есть какая-либо категория кроме той, которая добавлена в характеристике. Исправлено.

[!] Модули: Возврат товаров: Промо-акции и скидки: Возврат не учитывал скидку на заказ. Исправлено.

[!] Модули: Вход через соцсети: На главной странице могла отображаться ошибка PHP Notice. Исправлено.

[!] Модули: Вход через соцсети: На странице регистрации для неавторизованного пользователя отображались кнопки для привязывания социальных сетей к текущему профилю вместо кнопок для авторизации через социальные сети. Исправлено.

[!] Модули: Карта сайта для Yandex и Google: При отправке карты сайта в Google возникала ошибка. Исправлено.

[!] Модули: Карты и геолокация: В мобильной версии кнопки диалогового окна не всегда умещались на экране. Исправлено.

[!] Модули: Карты и геолокация: Предварительный расчёт доставки не учитывал зависимость от тарифных зон. Исправлено.

[!] Модули: Карты и геолокация: Яндекс карты: При установке местоположения, город не записывался. Исправлено.

[!] Модули: Магазины и пункты самовывоза: На витрине в выпадающем списке отображалось только 10 городов. Исправлено

[!] Модули: Местоположение продавцов [Beta]: Выбор местоположения его не выбирал. Исправлено.

[!] Модули: Местоположение продавцов: Фильтры товаров: Неправильно заполнялся ползунок фильтра. Исправлено.

[!] Модули: Мобильное приложение: В архив с настройками не выгружалась переменная, отвечающая за отступы от экрана. Исправлено.

[!] Модули: Не работала кнопка отключения всех модулей. Исправлено.

[!] Модули: Обратный звонок: Кнопка «Купить в один клик» отображалась в списке товаров, если у товара были опции и его не было в наличии. Исправлено.

[!] Модули: Отзывы о товарах: При включенной настройке "Показывать содержимое вкладки во всплывающем окне" флажок "С фото" ломал всплывающее окно с отзывами. Исправлено.

[!] Модули: Отзывы: Фильтр по опции "С фото" некорректно работал, если у товара не было отзывов с изображениями. Исправлено.

[!] Модули: ПЭК: При расчете стоимости доставки могла появляться PHP ошибка. Исправлено.

[!] Модули: Планы поставщиков: Некоторые ссылки в модуле "Планы поставщиков" были некорректными. Исправлено.

[!] Модули: Подарочные сертификаты: При просмотре деталей заказа сумма налога в некоторых случаях отображалась некорректно. Исправлено.

[!] Модули: Подарочные сертификаты: Таблица со списком подарочных сертификатов выходила за границы страницы, если в полях "От кого", "Кому" были длинные значения. Исправлено.

[!] Модули: Поставщики: Если в настройках не задана страна по-умолчанию, список в поле Регион при создании поставщика не отображался. Исправлено.

[!] Модули: Поставщики: Уведомления: В модуле присутствовали нерабочие настройки для отправки уведомлений. Исправлено

[!] Модули: Расширенный импорт товаров: Настройка "Разделитель изображений" была скрыта для файлов формата csv. Исправлено.

[!] Модули: Расширенный импорт товаров: Пропуск товаров из-за настройки "Import strategy" не увеличивает список пропущенных. Исправлено.

[!] Модули: Российские способы оплаты: Для заказов со способом оплаты 'выставить счет' не было кнопки 'отправить'. Исправлено.

[!] Модули: Склады [Beta]: Импорт: При импорте товара с количеством не для всех складов, общее количество товара рассчитывалось неправильно. Исправлено.

[!] Модули: Центр сообщений: На странице заказа не отображался ID диалога. Исправлено

[!] Модули: Центр сообщений: Не приходили уведомления в центр уведомлений если установлен старый режим редактирования email-уведомлений. Исправлено.

[!] Модули: Центр сообщений: на витрине не работали некоторые ссылки. Исправлено.

[!] Модули: ЮKassa: Смена статуса заказа, при включенном холдировании платежей, при получении уведомления работала некорректно. Исправлено.

[!] Модули: Яндекс.Доставка: При оформлении черновика заказа в сервисе Яндекс.Доставка, данные о службе доставки не передавались в полном объеме. Исправлено.

[!] Модули: Яндекс.Метрика: Если в магазине было несколько витрин, автоматические цели могли не создаться. Исправлено.

[!] Модули: Яндекс.Метрика: Если в магазине было несколько витрин, то в некоторых случаях ссылка для обновления токена могла не отображаться. Исправлено.

[!] Настройки: Витрины: Компании: Переключатель витрин не отображался для некоторых страниц настроек. Исправлено

[!] Нижняя панель: Ссылка на панель администратора могла вести на страницу, к которой у пользователя не было прав доступа. Исправлено.

[!] Панель администратора: Возникала js-ошибка из-за плагина LazyLoader. Исправлено.

[!] Панель администратора: Журнал событий: В форме расширенного поиска отображался неверный тип записи. Исправлено.

[!] Панель администратора: Заказы: В контекстном меню показывались не все элементы при просмотре на экране с шириной меньше 770px. Исправлено.

[!] Панель администратора: Хранилище данных: В настройках CDN отображалась некорректная ссылка на сайт AWS. Исправлено.

[!] Поля профиля: Не учитывались поля "Имя" и "Фамилия" при отправки на дополнительный адрес доставки. Исправлено.

[!] Поля профиля: При регистрации продавца без поля 'email' возникали ошибки. Исправлено.

[!] Товары: Опции: Опция в общем товаре отображалась даже в случае, когда она не доступна для витрины. Исправлено.

[!] Товары: Уведомление о появлении товара в наличии отправлялось, когда статус товара был "Выкл." или "Скрыто". Исправлено.

[!] Производительность: Шрифты: До загрузки пользовательского шрифта текст не отображался. Исправлено.

[!] Промо-акции и скидки: Способы доставки: Способы доставки продавцов были недоступны администратору маркетплейса в промо-акциях. Исправлено.

[!] Расширенный поиск: Продавцы: Если медленно вводить имя продавца, то поле теряло фокус. Исправлено.

[!] Способы доставки: В настройках способа доставки никак не отмечались отключенные тарифные зоны. Исправлено.

[!] Товары: Настройка "Минимальное количество для покупки одного товара" имела неправильный формат. Исправлено.

[!] Товары: Продаваемые файлы: Вкладки: При редактировании файла могло открыться окно редактирования вкладки и наоборот. Исправлено.

[!] Товары: Редактор подробного описания товаров: Интерфейс был не полностью переведён на русский язык. Исправлено

[!] Товары: Сравнение: Могло отображаться пустое уведомление "Товар добавлен в cписок сравнения". Исправлено.

[!] Товары: Характеристики: Отображались Нерелевантные предупреждения о недоступности характеристики при переносе товара в другую категорию. Исправлено

[!] Экспорт/Импорт: Оптовые скидки: Присутствовала возможность создать группу пользователей через импорт оптовых скидок под аккаунтом продавца. Исправлено

[!] Экспорт/Импорт: При наличии в названии группы характеристик скобок, характеристики могли импортироваться неправильно. Исправлено.

[!] Ядро: Изображения: В некоторых случаях при включенном твике "lazy_thumbnails" ссылки на изображения были некорректными. Исправлено.

[!] Ядро: При использовании HTTP аутентификации, могла возникнуть PHP ошибка. Исправлено.

[!] Ядро: Если в поисковом запросе присутствовал символ %, то при перезагрузке страницы с помощью AJAX получали ошибку. Исправлено.

[!] API: Отгрузки: Невозможно было обновить существующую отгрузку используя API. Исправлено.

[!] API: При включенном редиректе на витрины другого региона API работало некорректно. Исправлено

[!] Muilti-Vendor: Заказы: При покупке товаров от разных продавцов без обязательной доставки могли появиться заказы, в которых эти продавцы не соответствует их товарам. Исправлено.

[!] Multi-Vendor: API: Продавцы: Учетная запись администратора продавца не создавалась при создании продавца через API. Исправлено; чтобы создать администратора продавца, необходимо добавить параметр "create_vendor_admin" со значением "true" или "Y" в ваш запрос.

[!] Multi-Vendor: Бухгалтерский учет: В расчёте текущего баланса и дохода продавца учитывалась сумма отклоненной выплаты. Исправлено.

[!] Multi-Vendor: Мастер настройки магазина: В некоторых случаях параметр «Включить отслеживание количества товаров:» не работал. Исправлено.

[!] Multi-Vendor: Модули: RMA: Тарифные планы для продавцов: Комиссии для категорий: Возникали ошибки PHP Notice при возврате заказа, если налоги не включались в комиссию. Исправлено.

[!] Multi-Vendor: Модули: Storefront REST API: при привязанных к витрине валютах GET-запрос на sra_storefront приводил к ошибке. Исправлено

[!] Multi-Vendor: Модули: Возврат товаров: Возвращаемая сумма могла быть рассчитана некорректно, если способ оплаты содержал дополнительный сбор. Исправлено.

[!] Multi-Vendor: Модули: Карта сайта для Yandex и Google: В карте сайта отсутствовали ссылки на микромагазины продавцов. Исправлено.

[!] Multi-Vendor: Модули: Магазины и пункты самовывоза: Склады: Продавцы могли видеть чужие склады и не могли задавать приоритет списания товаров. Исправлено.

[!] Multi-Vendor: Модули: Общие товары для продавцов: Если общий товар продается кем-то из продавцов, администратор все еще мог изменить его владельца на конкретного продавца. Исправлено.

[!] Multi-Vendor: Модули: Отзывы и комментарии: Создание нового продавца связывало с ним отзывы о магазине, что могло приводить к их утрате, при удалении продавца. Исправлено.

[!] Multi-Vendor: Модули: Подарочные сертификаты: Для промо-акций на корзину был доступен бонус "Подарочный сертификат". Исправлено.

[!] Multi-Vendor: Модули: Премодерация данных продавцов: Товары, созданные продавцом в мобильном приложении, не попадали под действие настроек модуля. Исправлено.

[!] Multi-Vendor: Модули: Тарифные планы для продавцов: Импорт/Экспорт: Обновление товара импортом при отсутствующей колонке категорий пропускало товар. Исправлено.

[!] Multi-Vendor: Модули: Тарифные планы для продавцов: Комиссия продавца могла быть рассчитана неправильно, при расчете налога по цене за единицу товара. Исправлено.

[!] Multi-Vendor: Модули: Тарифные планы для продавцов: На странице регистрации продавцов нельзя было скрыть поле выбора плана. Исправлено.

[!] Multi-Vendor: Модули: Тарифные планы для продавцов: Не создавался новый план на странице редактирования / добавления продавца. Исправлено.

[!] Multi-Vendor: Модули: Экспорт в Яндекс.Маркет: Параметры товарных предложений в панели администратора отображались некорректно. Исправлено.

[!] Multi-Vendor: Настройки: Витрины: Значения настроек, выбранных для витрины, могли игнорироваться и их невозможно было бы изменить, если витрина осталась бы одна. Исправлено.

[!] Multi-Vendor: Оформление заказа: Было невозможно купить товары от разных продавцов, часть из которых не используют способы доставки. Исправлено.

[!] Multi-Vendor: Пользователи: Профили: Если страна пользователя не сопадала со страной по умолчанию, то в панели продавца в профиле область отображалась некорректно. Исправлено.

[!] Multi-Vendor: Продавцы: Товары: Не работал предпросмотр товара продавца со статусом Pending. Исправлено.

[!] Multi-Vendor: Средство выбора витрины отображалось в модулях, которые не поддерживают его. Исправлено

[!] Multi-Vendor Plus: Мобильное приложение: Модули: Общие товары для продавцов: Продавцы: На странице продавца не отображались товарные предложения, если они вариации общего товара. Исправлено.

[!] Multi-Vendor Plus: Модули: Общие товары для продавцов: Не работало выделение общих товаров в панели продавца. Исправлено.

[!] Multi-Vendor Plus: Модули: Оплата напрямую продавцам: Бухгалтерский учет: Изменения заказа некорректно отображались в информации о выплатах. Исправлено.

[!] Multi-Vendor Plus: Модули: Оплата напрямую продавцам: Когда администратор входил на витрину от имени покупателя, корзина этого покупателя очищалась. Исправлено.

[!] Multi-Vendor Plus: Модули: Оплата напрямую продавцам: Не удалялись товары из списка желаемых товаров. Исправлено.

[!] Multi-Vendor Plus: Модули: Оплата напрямую продавцам: Стоимость доставки во всплывающем окне расчета доставки не менялась при выборе другого варианта. Исправлено

[!] Multi-Vendor Plus: Модули: Привилегии продавцов: Группы пользователей: При создании продавца из учетной записи покупателя ему не присваивалась группа пользователей "Продавец". Исправлено

[!] Multi-Vendor Plus: Модули: Рейтинг продавцов: Не сохранялось значение в поле Рейтинг тарифного плана, заданный вручную. Исправлено.

[!] Multi-Vendor Ultimate: Модули: Фулфилмент от маркетплейса [Beta]: Некорректный расчет комиссии, при существующем дополнительном сборе при оплате. Исправлено.

[!] Multi-Vendor Ultimate: Модули: Фулфилмент от маркетплейса [Beta]: Некорректный расчет комиссии, при существующем налоге на доставку, не включенном в цену. Исправлено.

[!] Multi-Vendor Ultimate: Модули: Фулфилмент от маркетплейса [Beta]: Когда переход на другой тарифный план затрагивал изменение доступа к фулфилменту, уведомление об этом могло не появиться. Исправлено.

[!] Multi-Vendor Ultimate: Модули: Фулфилмент от маркетплейса [Beta]: Уведомление о переходе на план с/без фулфилмента отображалось при регистрации продавца. Исправлено

[!] Multi-Vendor Ultimate: Модули: Фулфилмент от маркетплейса [Beta]: Мобильное приложение: Способ доставки дублировался при оформлении заказа. Исправлено.

[!] Multi-Vendor Ultimate: Темы: Шаблоны: Кэш: Блок из модуля может не отображаться на одной из витрин, если  витрины используют разные темы. Исправлено.

[!] Multi-Vendor Ultimate: Товары: На странице брендов могли выводиться недоступные на данной витрине бренды. Исправлено.

[!] Products: Установка в опции "Шаг списка выбора количества" значений из интервала (0; 1) приводила к ошибке. Исправлено.

[!] REST API: Товары: Характеристики: При обновлении некоторых типов характеристик товара через API, значение характеристики не обновлялось. Исправлено.

[!] UI/UX: На iPhone страница увеличивалась после закрытия диалогового окна, в котором для поля был установлен автофокус. Исправлено.