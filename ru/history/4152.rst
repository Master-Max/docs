******
4.15.2
******

==================================
Новая функциональность и улучшения
==================================

[+] Дизайн: Меню: Быстрые ссылки: Добавлено выделение активного элемента меню.

[+] Модули: Возврат товаров: В модуль добавлена возможность задавать значения настроек по умолчанию.

[+] Модули: Возврат товаров: Импорт: Добавлена возможность импортировать параметры возврата товара.

[+] Модули: Комплекты товаров: Добавлена возможность выбора расположения блока комплектов товаров на витрине.

[+] Модули: Соответствие GDPR (Общему регламенту по защите данных в ЕС): В настройки модуля добавлена ссылка на страницу редактирования текста о согласии на файлы cookie.

[+] Поиск: Если форма имеет мета-класс "cm-disable-empty-all", то пустые поля не будут отправляться на сервер.

[+] Товары: На поле количество товара было добавлено ограничение на ввод букв.

[+] Товары: Производительность: Была добавлена отложенная загрузка вариантов характеристик на странице массового редактирования товаров.

[+] Ядро: Добавлена полифил библиотека mcrypt для некоторых способов оплаты, использующих mcrypt.

[+] Multi-Vendor: Модули: Премодерация данных продавцов: Добавлено e-mail уведомление о новых товарах на модерации.

=========================================
Изменения в существующей функциональности
=========================================

[*] Дизайн: Теперь статус витрины пересчитывается автоматически.

[*] Дизайн: Шрифты: Отображение системных шрифтов на Ubuntu было улучшено.

[*] Импорт/Экспорт: Изменен цвет уведомления об успешном импорте без пропущенных элементов.

[*] Модули: Отзывы о товарах: Центр сообщений: Отзывы и комментарии: Дизайн: Тег "h3" в модальном окне авторизации пользователя был заменен на тег "div".

[*] Модули: ЮKassa: SDK был обновлен до версии 2.4.2.

[*] Модули: Яндекс.Доставка: Модуль удален в связи с закрытием сервиса.

[*] Редактирование заказа: Поля профиля и оплаты теперь не обязательны для заполнения на странице редактирования заказа в панели администратора.

[*] Способы доставки: Temando: Удалены сервисы доставки Temando.

[*] Multi-Vendor: Модули: Расширенный импорт товаров: Добавлено отображение CRON-команды в панели администраторов для пресетов, созданных администраторами продавцов.

[*] Multi-Vendor: Модули: Местоположение продавцов [Beta]: Добавлена поддержка Яндекс.Карт.

[*] Multi-Vendor: Модули: Платежи через Stripe Connect: В систему подключения продавцов добавлен Connect Onboarding.

[*] Multi-Vendor Plus: Модули: Общие товары для продавцов: У общих товаров добавлена кнопка "Добавить в список сравнения".

==================
Исправления ошибок
==================

[!] Дизайн: Всплывающие окна: Если закрыть всплывающее окно во время выполнения AJAX-запроса, то могла возникнуть ошибка. Исправлено.

[!] Дизайн: Макеты: Блоки: При редактировании контента в блоке способов доставки возникала ошибка. Исправлено.

[!] Дизайн: Макеты: Если было несколько макетов, то кнопка отмены в окне свойства макета не работала. Исправлено.

[!] Дизайн: Меню: Выпадающие пункты меню могли отображаться за пределами страницы. Исправлено.

[!] Дизайн: Панель администратора: Элементы меню администратора нельзя было выбрать на экранах с низкой высотой. Исправлено.

[!] Дизайн: Фильтры: Большие цены в блоке фильтров выходили за границы. Исправлено.

[!] Заказы: Корзина: Товары в одной из переменных корзины и заказа хранили хэш от пароля пользователя. Исправлено

[!] Заказы: Незавершенные покупки: Поиск по товарам отображал только незавершенные покупки, содержащие все выбранные товары. Исправлено.

[!] Заказы: Отчеты о продажах: Подсказка с длинным названием товара не помещалась на экране. Исправлено.

[!] Импорт/Экспорт: Характеристики товаров: Характеристика с типом фильтра "Выбор даты" экспортировалась с пустым значением. Исправлено.

[!] Контекстное меню: Таблица смещалась при отображении контекстного меню. Исправлено.

[!] Корзина: Товар не удалялся из корзины, когда количество товара было равно нулю. Исправлено.

[!] Маркетинг: Промо-акции и скидки: При создании промо-акции с участием характеритики товара в условии, выбранные варинаты характеристики пропадали после сохранения. Исправлено.

[!] Мобильное приложение: Авторизация через Google перенаправляла в мобильную версию сайта. Исправлено.

[!] Мобильное приложение: Блок товаров скроллил за последний товар в блоке. Исправлено.

[!] Мобильное приложение: В приложении не работала настройка "Отслеживать количество". Исправлено.

[!] Мобильное приложение: Загружаемые изображения товаров отображались в разных размерах. Исправлено.

[!] Мобильное приложение: Заказы: Возникала ошибка при переходе на страницу заказов в панели администратора. Исправлено.

[!] Мобильное приложение: Магазины и пункты самовывоза: Не отображались пункты выдачи. Исправлено.

[!] Мобильное приложение: Многострочные поля ввода работали некорректно. Исправлено.

[!] Мобильное приложение: При расчете стоимости доставки не учитывались изменения в адресе. Исправлено.

[!] Модули: Блог: Открытие в пагинации несуществующей страницы отображало содержимое последней доступной страницы. Исправлено.

[!] Модули: Бонусные баллы: В некоторых случаях, переход из панели администратора на витрину вызывал ошибку. Исправлено.

[!] Модули: Вариации товаров: Комплекты товаров: Товар с нулевым количеством невозможно было приобрести при включенной настройке "Разрешить отрицательное количество товаров в наличии". Исправлено.

[!] Модули: Вариации товаров: Порядок товаров в корзине мог измениться после смены одной вариации на другую. Исправлено.

[!] Модули: Вариации товаров: Последовательность характеристик в группе не учитывала изменение целей характеристик. Исправлено.

[!] Модули: Вариации товаров: Характеристики с внешним видом "Изображения" работали некорректно при включенной настройке "Разрешить отрицательное количество товаров в наличии". Исправлено.

[!] Модули: Вариации товаров: Экспорт в Яндекс.Маркет: После открытия вкладки вариаций, могло требоваться сохранение изменений на странице. Исправлено.

[!] Модули: Возврат товаров: Бонусные баллы: Стоимость заказа рассчитывалась некорректно при возврате заказа, частично оплаченного бонусными баллами. Исправлено.

[!] Модули: Возврат товаров: Подарочные сертификаты: В магазинах с одной витриной некорректно создавались подарочные сертификаты. Исправлено.

[!] Модули: Возврат товаров: Языки: Заголовок поля поиска и кнопка возврата использовали одну языковую переменную. Исправлено.

[!] Модули: Вход через соцсети: При входе со страницы товара пользователь перенаправлялся на главную страницу. Исправлено.

[!] Модули: Импорт из Shopify: Дополнительные изображения товара некорректно импортировались. Исправлено.

[!] Модули: Карта сайта для Yandex и Google: Ссылка на карту сайта отсутствовала в настройках модуля, если в магазине была одна витрина. Исправлено.

[!] Модули: Карты и геолокация: Блок расчета стоимости доставки на странице товара мог перезаписать заголовок страницы. Исправлено.

[!] Модули: Карты и геолокация: Местоположение клиента в стране, выключенной в панели администратора, могло помешать оформить заказ. Исправлено.

[!] Модули: Карты и геолокация: На детальной странице заказа переключатель вида накладывался на поиск. Исправлено.

[!] Модули: Карты и геолокация: Некорректный текст мог отображаться в блоке местоположения покупателя. Исправлено.

[!] Модули: Карты и геолокация: Предварительный расчёт доставки мог вызывать на витрине оповещение про необходимое минимальное количество товара для покупки. Исправлено.

[!] Модули: Карты и геолокация: Расчет стоимости доставки некорректно работал с промо-акциями корзины на странице товара. Исправлено.

[!] Модули: Комплекты товаров: Вариации товаров: Скидка могла рассчитываться неправильно для некоторых комбинаций товаров в комплекте. Исправлено.

[!] Модули: Комплекты товаров: Для вариаций, созданных как отдельные товары, можно было выбрать характеристики в комплекте. Исправлено.

[!] Модули: Комплекты товаров: Имя вариации, добавленной при создании комплекта, могло быть неоднозначным. Исправлено.

[!] Модули: Комплекты товаров: Множество товаров с допустимым любым набором опций не были разделены по одному на витрине. Исправлено.

[!] Модули: Комплекты товаров: На витрине для товаров в комплекте и самого комплекта не отображалась цена с налогом, даже если настройки этого требовали. Исправлено.

[!] Модули: Конструктор прайс-листов: Добавление новых полей заменяло уже существующие поля. Исправлено.

[!] Модули: Лендинги из Тильды: Контент страниц вебсайта мог отображаться на других страницах. Исправлено.

[!] Модули: Лендинги из Тильды: Отображался лишний текст в конце контента страницы из Тильды. Исправлено.

[!] Модули: Магазины и пункты самовывоза: Магазин не мог иметь больше 88 тарифных зон. Исправлено.

[!] Модули: Отзывы и комментарии: Уведомления: В секции уведомлений модуля отображался пункт о новых отзывах на товары при включенном модуле "Отзывы о товарах". Исправлено.

[!] Модули: Отзывы о товарах: Соответствие GDPR: Отсутствовала языковая переменная на детальной странице покупателя. Исправлено.

[!] Модули: Отзывы о товарах: Экспорт/Импорт: Сбрасывались переносы строк в отзывах о товарах. Исправлено.

[!] Модули: Отложенные товары: При очистке списка отложенных товаров возникала ошибка. Исправлено.

[!] Модули: Расширенный импорт товаров: Не импортировались изображения из директории по умолчанию. Исправлено.

[!] Модули: Режим каталога: Комплекты товаров: В режиме работы магазина "Каталог" кнопка "Добавить все в корзину" отображалась у комплектов товаров. Исправлено.

[!] Модули: Социальные кнопки: Соответствие GDPR: Кнопки социальных сетей не отображались на странице товара при отключенной настройке "Согласие на файлы cookie". Исправлено.

[!] Модули: Центр сообщений: Вопросы по удаленным товарам вызывали ошибки PHP. Исправлено.

[!] Модули: Boxberry: СДЭК: Способы доставки: Время доставки от сервиса на странице оформления заказа отображалось несогласованно. Исправлено.

[!] Модули: CommerceML (1С, МойСклад, Бизнес.Ру) [Beta]: При импорте товаров создавались варианты характеристик, которые не должны создаваться по карте сопоставления сущностей. Исправлено.

[!] Модули: CommerceML (1С, МойСклад, Бизнес.Ру) [Beta]: При повторном импорте не обновлялись варианты характеристик. Исправлено.

[!] Модули: CommerceML: Импорт товара с несколькими категориями импортировал только первую из них. Исправлено.

[!] Модули: CommerceML: При обмене большого количества товаров с "МойСклад" на стороне системы учета возникала ошибка. Исправлено.

[!] Модули: CommerceML: При передаче изображений товаров не в архиве, а напрямую, путь к картинкам неправильно распознавался при импорте товара. Исправлено.

[!] Модули: Google Analytics: Соответствие GDPR (Общему регламенту по защите данных в ЕС): Не отслеживалась статистика посещений при включённом модулем GDPR. Исправлено.

[!] Модули: SEO: Отсутствовал редирект с разных URL товара, когда настройка "Использовать один и тот же URL для всех языков" в модуле SEO была влючена. Исправлено.

[!] Модули: SEO: Отсутствовали редиректы с URL, содержащих заглавные буквы. Исправлено.

[!] Модули: SEO: Редирект со старого SEO имени выполнялся со статусом временного. Исправлено.

[!] Налоги: Заказы: В некоторых случаях, при редактировании заказа в панели администратора не учитывался налог на доставку. Исправлено.

[!] Панель администратора: Дизайн: В некоторых случаях ссылка на витрину, расположенная в меню администратора, вела на другую витрину. Исправлено.

[!] Поля профиля: Вместо обязательного значения можно было использовать пробел. Исправлено.

[!] Промо-акции и скидки: Настройка "Любые комбинации опций" не применялись для второго и последующих условий "Товары в списке". Исправлено.

[!] Регионы: Отсутствовали регионы для Ирландии и недостающие регионы Северной Ирландии в Соединенном Королевстве. Исправлено.

[!] Редактор тем: Шрифты Google могли не применяться к не латинским символам. Исправлено.

[!] Способы доставки: Australia post: В интеграции использовалась устаревшая ссылка для отслеживания. Исправлено.

[!] Способы оплаты: Stripe: При выборе на витрине другого варианта товара на странице товара пропадали кнопки Apple Pay и Google Pay. Исправлено.

[!] Товары: Оптовые скидки: Процентная оптовая скидка не могла быть дробной. Исправлено.

[!] Товары: Подписчики: Уведомление о появлении товара в наличии могли отправляться ошибочно. Исправлено.

[!] Товары: Характеристики: Администратор не мог добавить варианты к существующей характеристике во всплывающем окне. Исправлено.

[!] Товары: Характеристики: Поле характеристики отображалось некорректно, если было выбрано длинное значение характеристики на странице редактирования товара. Исправлено.

[!] Уведомления: Ссылки для скачивания товаров формировались некорректно в электронных письмах, если магазин использовал HTTPS протокол. Исправлено.

[!] Фильтры товаров: Когда на странице было два одинаковых блока фильтров, работал только первый. Исправлено.

[!] Экспорт/Импорт: Варианты характеристик могли быть импортированы некорректно. Исправлено.

[!] Ядро: JS: Ошибка CORS могла нарушить корректную работу панели администратора при работе в iframe. Исправлено.

[!] Ядро: Модули: Ручная установка модулей могла производиться некорректно. Исправлено.

[!] Ядро: Сессии: Сессии могли храниться дольше настроенного времени. Исправлено.

[!] API: Товары: GET запрос к сущности товаров мог возвращать в значении цены большее количество цифр после запятой, чем указано в настройках валюты. Исправлено.

[!] Multi-Vendor: Модули: Конфигуратор панели продавцов: В меню отображались лишние элементы Валюта и Язык. Исправлено.

[!] Multi-Vendor: Модули: Местоположение продавцов [Beta]: Некорректно отображались продавцы на карте при переключении страниц. Исправлено.

[!] Multi-Vendor: Модули: Местоположение продавцов: Не работали настройки отображения Google Карт. Исправлено.

[!] Multi-Vendor: Модули: Оплата от продавцов администратору: Оплата задолженности могла облагаться налогом, даже если он был выключен в настройках модуля. Исправлено.

[!] Multi-Vendor: Модули: Оплата от продавцов администратору: Товар "Оплата задолженности" мог быть изменен администратором, когда модуль отключен. Исправлено.

[!] Multi-Vendor: Модули: Платежи через Stripe Connect: Если в настройках валюты количество знаков после запятой не было равно двум, в Stripe отправлялась неверная сумма. Исправлено.

[!] Multi-Vendor: Панель администратора: Панель инструментов: Значение дохода за выбранный период в 1 день могло быть неправильным. Исправлено.

[!] Multi-Vendor: Поля профиля продавца: При обновлении данных о продавце, пользовательские поля продавца могли быть перезаписаны. Исправлено.

[!] Multi-Vendor: Редактирование заказа: При создании заказа с товарами разных продавцов отображалась ошибка. Исправлено.

[!] Multi-Vendor: Экспорт/Импорт: Продавцы: Товары: При создании продавца через импорт не учитывались способы доставки по-умолчанию. Исправлено.

[!] Multi-Vendor: Модули: PayPal Commerce Platform: В форме оплаты кредитной картой отображался флажок «Отправить на платежный адрес». Исправлено.

[!] Multi-Vendor: Модули: PayPal Commerce Platform: Платежи через Stripe Connect: На детальной странице заказа возникала PHP ошибка в PHP 8.0 Исправлено.

[!] Multi-Vendor: API: Администраторы продавца: При создании администратора продавца возникала ошибка. Исправлено.

[!] Multi-Bendor Plus: Модули: Общие товары для продавцов: Параметры доставки не сохранялись для товарных предложений. Исправлено.

[!] Multi-Vendor Plus: Модули: Общие товары для продавцов: В некоторых случаях для общих товаров не работала кнопка "Добавить в корзину". Исправлено.

[!] Multi-Vendor Plus: Модули: Общие товары для продавцов: Макеты: Изменения в макете общего товара не применялись к товарным предложениям. Исправлено.

[!] Multi-Vendor Plus: Модули: Общие товары для продавцов: Местоположение продавцов: Фильтры: Общие товары не отображались при фильтрации по местоположению продавцов. Исправлено.

[!] Multi-Vendor Plus: Модули: Общие товары для продавцов: Опции: Предложения продавца добавлялись в корзину с неверными вариантами опций. Исправлено.

[!] Multi-Vendor Plus: Модули: Общие товары для продавцов: Отложенные товары: Опции: При выборе опции товара кнопка "Отложить" в списке товарных предложений дублировалась. Исправлено.

[!] Multi-Vendor Plus: Модули: Общие товары для продавцов: Обратный звонок: Кнопка "Купить в один клик" для товарного предложения продавца не работала. Исправлено.

[!] Multi-Vendor Plus: Модули: Общие товары для продавцов: При добавлении товарного предложения в корзину после смены опции данные корзины не обновлялись. Исправлено.

[!] Multi-Vendor Plus: Модули: Общие товары для продавцов: Рекомендованная цена отображалась некорректно. Исправлено.

[!] Multi-Vendor Plus: Модули: Общие товары для продавцов: Товар, отсутствующий в наличии, не добавлялся в корзину при активной настройке предзаказа. Исправлено.

[!] Multi-Vendor Plus: Модули: Общие товары для продавцов: Товарные предложения были доступны в расширенном поиске товаров. Исправлено.

[!] Multi-Vendor Plus: Модули: Общие товары для продавцов: Фильтры: Фильтр по товарам продавца работал некорректно с постраничной навигацией. Исправлено.

[!] Multi-Vendor Plus: Модули: Оплата напрямую продавцам: Товар с обязательной опцией типа "файл" не мог быть добавлен в корзину. Исправлено.

[!] Multi-Vendor Ultimate: Модули: Общие товары для продавцов: Вариации товаров: При проверке на наличие вариаций как общего товара не учитывались витрины. Исправлено.

[!] Multi-Vendor Ultimate: Модули: Общие товары для продавцов: При расчете количества общего товара не учитывались витрины. Исправлено.

[!] Multi-Vendor Ultimate: Модули: CommerceML: Склады: Для сопоставления складов в синхронизации данных продавцам были доступны не принадлежащие им магазины. Исправлено.

[!] Multi-Vendor Ultimate: Модули: Склады: Общие товары для продавцов: При включенной настройке "Разрешить отрицательное количество товаров в наличии" можно было заказать общий товар из любой тарифной зоны независимо от его наличия. Исправлено.

[!] Multi-Vendor Ultimate: Модули: Фулфилмент от маркетплейса: Доставка становилась бесплатной, если была отклонена кредитная карта. Исправлено.

[!] Multi-Vendor Ultimate: Модули: Фулфилмент от маркетплейса: Не отображался выбор способа доставки при создании заказа из панели администратора. Исправлено.

[!] Multi-Vendor Ultimate: Модули: Фулфилмент от маркетплейса: Тарифные планы для продавцов: Возникала ошибка PHP Notice при обновлении тарифного плана продавца, если у него ещё не было тарифного плана. Исправлено.

[!] RTL: Валюты: В письмах отрицательные цены отображались некорректно. Исправлено.

[!] UI/UX: При переходе по вкладкам, контекстное меню оставалось и работало некорректно на странице результатов поиска. Исправлено.

[!] UI/UX: На маленьких экранах главное меню переносилось на новую строку. Исправлено.

[!] UI/UX: Удаление картинок работало некорректно. Исправлено.

[!] UI/UX: Фильтры товаров: Когда пользователь выбирал вариант фильтра в конце списка, то положение скрола сбрасывалось в начало списка. Исправлено.

[!] UI/UX: Фильтры товаров: Свернутые фильтры разворачивались после перезагрузки страницы. Исправлено.

[!] Ultimate: Модули: Склады: Не оформлялись заказы, в составе которых были товары с опциями. Исправлено.

[!] Ultimate: Витрины: Валюты: Курсы валют сбрасывались при создании новой витрины. Исправлено.

[!] Ultimate: Витрины: Группы пользователей: Привилегии: У пользователя из группы с полным доступом к витринам возникала ошибка PHP на списке витрин. Исправлено.

[!] Ultimate: Витрины: Почтовые уведомления: Уведомление о малом количестве товара, могло отправляться с почтового ящика от другой витрины. Исправлено

[!] Ultimate: Сессии: Корзина: Корзина одной из витрин могла быть очищена при работе с несколькими витринами. Исправлено.

[!] Ultimate: Модули: SEO: Витрины: Сохранение товара в режиме "Все витрины" сбрасывало его SEO-имя. Исправлено.

[!] Ultimate: Категории: Способы доставки: Витрины: После сохранения изменений на списке категорий или способов доставки, все категории или способы доставки теряли привязку к витринам. Исправлено.
