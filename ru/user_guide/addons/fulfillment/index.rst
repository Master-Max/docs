***********************************
“Фулфилмент от маркетплейса [Beta]"
***********************************

.. note:: 

    Этот модуль есть только в **CS-Cart для маркетплейсов**. Перед использованием убедитесь, что модуль :doc:`/user_guide/addons/vendor_plans/index` установлен и включен.

.. contents::
    :backlinks: none
    :local:

Функциональность
================

При добавлении в один заказ нескольких товаров от разных продавцов, покупателю приходится выбирать способ доставки отдельно для каждого продавца. Для покупателя, продавца и администратора это разные заказы. Продавец занимается хранением, комплектацией и доставкой товара. На это тратятся значительный денежные и временные ресурсы. Покупателю невыгодно оплачивать доставку за каждый товар от разных продавцов.

В таких ситуациях удобен модуль “Фулфилмент от маркетплейса [Beta]". Он позволяет покупателям выбирать единый способ доставки для товаров от разных продавцов. При этом маркетплейс доставляет заказы и получает деньги от оплаты доставки.

Фулфилмент — это свойство тарифных планов продавцов. Поэтому, когда в магазине работает модуль, продавцы еще на этапе регистрации увидят, какие тарифные планы имеют преимущество в виде фулфилмента. 

.. fancybox:: img/vendor_plans.png
    :alt: Выбор тарифного плана для продавцов.

В зависимости от наличия фулфилмента в тарифных планах продавцов, модуль работает по-разному. 

#. Если покупатель выбрал несколько товаров от разных продавцов с включённым фулфилментом, доставка для всех товаров будет одна — от маркетплейса.

#. Если покупатель выбрал несколько товаров от разных продавцов, часть которых не имеют фулфилмента в своих тарифных планах, тогда будет как минимум две доставки:

   * от маркетплейса для товаров от продавцов с фулфилментом;

   * от продавца без фулфилмента.

   .. fancybox:: img/one_shipping.png
       :alt: Все товары от продавцов с фулфилментом.

       Одна доставка — товары от продавцов с фулфилментом доставляет маркетплейс.

   .. fancybox:: img/several_shippings.png
       :alt: Товары от продавцов и с фулфилментом, и без.

       Две доставки — товары от продавцов с фулфилментом доставляет маркетплейс, продавец без фулфилента доставялет свои товары сам. 

Как настроить продавцам фулфилмент
==================================

У самого модуля настроек нет. Включить доставку товаров конкретного продавца через маркетплейс можно следующим способом:

#. Установите модуль так же, :doc:`как и любой другой модуль </user_guide/addons/1manage_addons>`.

#. Перейдите на страницу **Продавцы → Тарифные планы для продавцов**.

#. Найдите тарифный план продавца, товары которого будут доставляться маркетплейсом. Откройте настройки этого тарифного плана. 

#. На вкладке **Доставка** поставьте галочку **Фулфилмент от маркетплейса**.

#. Нажмите **Сохранить**.

Теперь все товары от продавца с этим планом будет доставлять маркетплейс.

   .. fancybox:: img/enable_fulfillment.png
       :alt: Включение фулфилмента у тарифного плана.

Изменения в интерфейсе после включения модуля
=============================================

.. list-table::
   :widths: 30 40
   :header-rows: 1

   * - Модуль выключен
     - Модуль включен
   * -
     -
   * - По умолчанию продавцы создают свои способы доставки или используют доступные способы доставки, которыми владеет маркетплейс. Список последних находится на вкладке **Способы доставки** на странице настроек продавцов.
     - При включении модуля способы доставки, которыми владеет маркетплейс, будут доступны продавцам с фулфилментом в тарифных планах. Теперь маркетплейс доставляет товары этими способами доставки. Поэтому вкладка **Способы доставки** в настройках продавцов исчезает, но все значения с неё сохраняются. При выключении модуля вкладка возвращается со старыми настройками.
   * -
     -
   * - Еще до работы с модулем должны быть созданы и включены способы доставки, владелец которых маркетплейс. Если таких способов доставки не будет, тогда товары продавцов с фулфилментом в тарифных планах не будут доставлены. 
     - После подготовки способов доставки от маркетплейса, можно включить модуль и добавить фулфилмент к тарифным планам. Продавец с включенной галочкой фулфилмента в своем плане не сможет использовать свои способы доставки. В настройках способа доставки, который использует маркетплейс, в разделе **Доступность** в качестве **Владельца** будет указан *Маркетплейс*.
   * - .. fancybox:: img/created_and_enabled_shipping_method.png
           :alt: Способы доставки, которыми владеет маркетплейс. 
           
           Включенный способ доставки, которым владеец маркетплейс.
     - .. fancybox:: img/owner_marketplace.png
           :alt: Владелец способа доставки — маркетплейс. 
           
           